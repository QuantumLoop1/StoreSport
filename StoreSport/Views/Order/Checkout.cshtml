@model Order
@{
    ViewBag.Title = "Checkout";
    Cart cart = ViewBag.Cart;
}

<h2>Check out now</h2>
<p>Please enter your details, and we'll ship your goods right away!</p>

@if (cart == null || !cart.Lines.Any())
{
    <div class="alert alert-warning">
        <strong>Your cart is empty!</strong>
   <a asp-controller="Home" asp-action="Index" class="btn btn-primary ms-3">Go Shopping</a>
    </div>
}
else
{
    <div class="row">
        <div class="col-md-6">
       <h4>Order Summary</h4>
      <table class="table table-sm table-bordered">
      <thead class="table-light">
   <tr>
           <th>Product</th>
       <th class="text-center">Qty</th>
  <th class="text-end">Price</th>
         <th class="text-end">Subtotal</th>
     </tr>
      </thead>
  <tbody>
          @foreach (var line in cart.Lines)
      {
       <tr>
   <td>@line.Product.Name</td>
  <td class="text-center">@line.Quantity</td>
  <td class="text-end">@line.Product.Price.ToString("c")</td>
   <td class="text-end">@((line.Quantity * line.Product.Price).ToString("c"))</td>
    </tr>
}
           </tbody>
    <tfoot>
         <tr class="table-dark">
   <td colspan="3" class="text-end fw-bold">Total:</td>
                  <td class="text-end fw-bold">@cart.ComputeTotalValue().ToString("c")</td>
           </tr>
 </tfoot>
      </table>
      </div>

        <div class="col-md-6">
   <h4>Shipping Details</h4>
  <div asp-validation-summary="All" class="text-danger"></div>

 <form asp-action="Checkout" method="post">
                <div class="form-group mb-2">
           <label asp-for="Name">Name:</label>
           <input asp-for="Name" class="form-control" />
           <span asp-validation-for="Name" class="text-danger"></span>
     </div>
                <div class="form-group mb-2">
     <label asp-for="Address">Address:</label>
           <input asp-for="Address" class="form-control" />
        <span asp-validation-for="Address" class="text-danger"></span>
     </div>
     <div class="form-group mb-2">
           <label asp-for="City">City:</label>
           <input asp-for="City" class="form-control" />
               <span asp-validation-for="City" class="text-danger"></span>
    </div>
       <div class="form-group mb-2">
   <label asp-for="State">State:</label>
         <input asp-for="State" class="form-control" />
    </div>
  <div class="form-group mb-2">
        <label asp-for="Zip">Zip:</label>
     <input asp-for="Zip" class="form-control" />
  </div>
           <div class="form-group mb-2">
     <label asp-for="Country">Country:</label>
     <input asp-for="Country" class="form-control" />
          <span asp-validation-for="Country" class="text-danger"></span>
 </div>
                <div class="form-check mb-3">
       <input asp-for="GiftWrap" class="form-check-input" />
      <label asp-for="GiftWrap" class="form-check-label">Gift wrap these items</label>
    </div>
     <div class="d-grid gap-2">
        <button class="btn btn-primary btn-lg" type="submit">Complete Order</button>
     <a class="btn btn-secondary" asp-controller="Cart" asp-action="Index">Back to Cart</a>
           </div>
        </form>
        </div>
    </div>
}
