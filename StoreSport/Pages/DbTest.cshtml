@page
@using StoreSport.Models
@inject IStoreRepository Repository

@{
    var products = Repository.Products.ToList();
}

<!DOCTYPE html>
<html>
<head>
    <title>Database Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1>Database Connection Test</h1>
      
        <div class="alert @(products.Any() ? "alert-success" : "alert-danger")">
    <h4>Products in database: @products.Count</h4>
        </div>

        @if (products.Any())
        {
   <table class="table table-striped">
  <thead>
    <tr>
      <th>ID</th>
          <th>Name</th>
      <th>Category</th>
    <th>Price</th>
  </tr>
       </thead>
           <tbody>
        @foreach (var p in products)
          {
    <tr>
       <td>@p.ProductId</td>
     <td>@p.Name</td>
   <td>@p.Category</td>
           <td>@p.Price.ToString("c")</td>
        </tr>
        }
        </tbody>
     </table>
        }
        else
        {
  <div class="alert alert-warning">
     <p>No products found. Run:</p>
                <pre>dotnet ef database drop --project StoreSport --force
dotnet ef database update --project StoreSport</pre>
   </div>
        }

    <div class="mt-3">
            <a href="/Admin" class="btn btn-primary">Go to Admin</a>
            <a href="/" class="btn btn-secondary">Go to Home</a>
        </div>
    </div>
</body>
</html>
